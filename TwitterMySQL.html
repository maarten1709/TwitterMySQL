
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module TwitterMySQL</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>TwitterMySQL</strong></big></big> (version 0.2)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/maarten/TwitterMySQL/TwitterMySQL.py">/home/maarten/TwitterMySQL/TwitterMySQL.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="xml.etree.ElementTree.html">xml.etree.ElementTree</a><br>
<a href="MySQLdb.html">MySQLdb</a><br>
</td><td width="25%" valign=top><a href="datetime.html">datetime</a><br>
<a href="json.html">json</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="re.html">re</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
<a href="time.html">time</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="TwitterMySQL.html#TwitterMySQL">TwitterMySQL</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="TwitterMySQL">class <strong>TwitterMySQL</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Wrapper&nbsp;for&nbsp;the&nbsp;integration&nbsp;of&nbsp;Twitter&nbsp;APIs&nbsp;into&nbsp;MySQL<br>
Turns&nbsp;JSON&nbsp;tweets&nbsp;into&nbsp;row&nbsp;format<br>
Failsafe&nbsp;connection&nbsp;to&nbsp;MySQL&nbsp;servers<br>
Geolocates&nbsp;if&nbsp;tweet&nbsp;contains&nbsp;coordinates&nbsp;in&nbsp;the&nbsp;US<br>
[TODO]&nbsp;Geolocates&nbsp;using&nbsp;the&nbsp;Google&nbsp;Maps&nbsp;API<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="TwitterMySQL-__init__"><strong>__init__</strong></a>(self, **kwargs)</dt><dd><tt>Required&nbsp;parameters:<br>
&nbsp;&nbsp;-&nbsp;db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MySQL&nbsp;database&nbsp;to&nbsp;connect&nbsp;to<br>
&nbsp;&nbsp;-&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;to&nbsp;insert&nbsp;Twitter&nbsp;responses&nbsp;in<br>
&nbsp;&nbsp;-&nbsp;API_KEY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Twitter&nbsp;API&nbsp;key&nbsp;(to&nbsp;connect&nbsp;to&nbsp;Twitter)<br>
&nbsp;&nbsp;-&nbsp;API_SECRET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Twitter&nbsp;API&nbsp;Secret<br>
&nbsp;&nbsp;-&nbsp;ACCESS_TOKEN&nbsp;&nbsp;&nbsp;&nbsp;Twitter&nbsp;App&nbsp;Access&nbsp;token<br>
&nbsp;&nbsp;-&nbsp;ACCESS_SECRET&nbsp;&nbsp;&nbsp;Twitter&nbsp;App&nbsp;Access&nbsp;token&nbsp;secret<br>
&nbsp;<br>
Optional&nbsp;parameters:<br>
&nbsp;&nbsp;-&nbsp;noWarnings&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;disable&nbsp;MySQL&nbsp;warnings&nbsp;[Default:&nbsp;False]<br>
&nbsp;&nbsp;-&nbsp;geoLocate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;function&nbsp;that&nbsp;converts&nbsp;coordinates&nbsp;to&nbsp;state<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and/or&nbsp;address.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(state,&nbsp;address)&nbsp;=&nbsp;your_method(lat,&nbsp;long)<br>
&nbsp;&nbsp;-&nbsp;errorFile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error&nbsp;logging&nbsp;file&nbsp;-&nbsp;warnings&nbsp;will&nbsp;be&nbsp;written&nbsp;to&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Default:&nbsp;stderr]<br>
&nbsp;&nbsp;-&nbsp;jTweetToRow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSON&nbsp;tweet&nbsp;to&nbsp;MySQL&nbsp;row&nbsp;tweet&nbsp;correspondence<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(see&nbsp;help&nbsp;file&nbsp;for&nbsp;more&nbsp;info)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Default:&nbsp;DEFAULT_TWEET_JSON_SQL_CORR]<br>
&nbsp;&nbsp;-&nbsp;SQLfieldsExp&nbsp;&nbsp;&nbsp;&nbsp;SQL&nbsp;column&nbsp;description&nbsp;for&nbsp;MySQL&nbsp;table<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Default:&nbsp;DEFAULT_MYSQL_COL_DESC]<br>
&nbsp;&nbsp;-&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;where&nbsp;the&nbsp;MySQL&nbsp;database&nbsp;is&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Default:&nbsp;localhost]<br>
&nbsp;&nbsp;-&nbsp;any&nbsp;other&nbsp;MySQL.connect&nbsp;argument</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-apiRequest"><strong>apiRequest</strong></a>(self, twitterMethod, **params)</dt><dd><tt>Takes&nbsp;in&nbsp;a&nbsp;Twitter&nbsp;API&nbsp;request&nbsp;and&nbsp;yields&nbsp;formatted&nbsp;responses&nbsp;in&nbsp;return<br>
&nbsp;<br>
Use&nbsp;as&nbsp;follows:<br>
for&nbsp;tweet&nbsp;in&nbsp;twtSQL.<a href="#TwitterMySQL-apiRequest">apiRequest</a>('statuses/filter',&nbsp;track="Twitter&nbsp;API"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;tweet<br>
&nbsp;<br>
For&nbsp;more&nbsp;info&nbsp;(knowing&nbsp;which&nbsp;twitterMethod&nbsp;to&nbsp;use)&nbsp;see:<br>
<a href="http://dev.twitter.com/docs/api/1.1">http://dev.twitter.com/docs/api/1.1</a></tt></dd></dl>

<dl><dt><a name="TwitterMySQL-createTable"><strong>createTable</strong></a>(self)</dt><dd><tt>Creates&nbsp;the&nbsp;table&nbsp;specified&nbsp;during&nbsp;<a href="#TwitterMySQL-__init__">__init__</a>().<br>
By&nbsp;default,&nbsp;the&nbsp;table&nbsp;will&nbsp;be&nbsp;deleted&nbsp;if&nbsp;it&nbsp;already&nbsp;exists,<br>
but&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;10&nbsp;second&nbsp;grace&nbsp;period&nbsp;for&nbsp;the&nbsp;user<br>
to&nbsp;cancel&nbsp;the&nbsp;deletion&nbsp;(by&nbsp;hitting&nbsp;CTRL-c).<br>
To&nbsp;disable&nbsp;the&nbsp;grace&nbsp;period&nbsp;and&nbsp;have&nbsp;it&nbsp;be&nbsp;deleted&nbsp;immediately,<br>
please&nbsp;use&nbsp;dropIfExists&nbsp;=&nbsp;True&nbsp;during&nbsp;construction</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-filterStreamToMySQL"><strong>filterStreamToMySQL</strong></a>(self, **params)</dt><dd><tt>Use&nbsp;this&nbsp;to&nbsp;insert&nbsp;the&nbsp;tweets&nbsp;from&nbsp;the&nbsp;FilterStream&nbsp;into&nbsp;MySQL<br>
&nbsp;<br>
Here's&nbsp;an&nbsp;example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;twtSQL.<a href="#TwitterMySQL-filterStreamToMySQL">filterStreamToMySQL</a>(track="Taylor&nbsp;Swift")<br>
Here's&nbsp;a&nbsp;second&nbsp;example&nbsp;(Continental&nbsp;US&nbsp;bounding&nbsp;box):<br>
&nbsp;&nbsp;&nbsp;&nbsp;twtSQL.<a href="#TwitterMySQL-filterStreamToMySQL">filterStreamToMySQL</a>(locations="-124.848974,24.396308,-66.885444,49.384358")<br>
&nbsp;<br>
More&nbsp;info&nbsp;here:<br>
<a href="http://dev.twitter.com/docs/api/1.1/post/statuses/filter">http://dev.twitter.com/docs/api/1.1/post/statuses/filter</a></tt></dd></dl>

<dl><dt><a name="TwitterMySQL-insertRow"><strong>insertRow</strong></a>(self, row, table<font color="#909090">=None</font>, columns<font color="#909090">=None</font>, verbose<font color="#909090">=True</font>)</dt><dd><tt>Inserts&nbsp;a&nbsp;row&nbsp;into&nbsp;the&nbsp;table&nbsp;specified&nbsp;using&nbsp;an&nbsp;INSERT&nbsp;SQL&nbsp;statement</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-insertRows"><strong>insertRows</strong></a>(self, rows, table<font color="#909090">=None</font>, columns<font color="#909090">=None</font>, verbose<font color="#909090">=True</font>)</dt><dd><tt>Inserts&nbsp;multiple&nbsp;rows&nbsp;into&nbsp;the&nbsp;table&nbsp;specified&nbsp;using&nbsp;an&nbsp;INSERT&nbsp;SQL&nbsp;statement</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-randomSampleToMySQL"><strong>randomSampleToMySQL</strong></a>(self, replace<font color="#909090">=False</font>)</dt></dl>

<dl><dt><a name="TwitterMySQL-replaceRow"><strong>replaceRow</strong></a>(self, row, table<font color="#909090">=None</font>, columns<font color="#909090">=None</font>, verbose<font color="#909090">=True</font>)</dt><dd><tt>Inserts&nbsp;a&nbsp;row&nbsp;into&nbsp;the&nbsp;table&nbsp;specified&nbsp;using&nbsp;a&nbsp;REPLACE&nbsp;SQL&nbsp;statement.</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-replaceRows"><strong>replaceRows</strong></a>(self, rows, table<font color="#909090">=None</font>, columns<font color="#909090">=None</font>, verbose<font color="#909090">=True</font>)</dt><dd><tt>Inserts&nbsp;multiple&nbsp;rows&nbsp;into&nbsp;the&nbsp;table&nbsp;specified&nbsp;using&nbsp;a&nbsp;REPLACE&nbsp;SQL&nbsp;statement</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-tweetsToMySQL"><strong>tweetsToMySQL</strong></a>(self, twitterMethod, **params)</dt><dd><tt>Ultra&nbsp;uber&nbsp;awesome&nbsp;function&nbsp;that&nbsp;takes&nbsp;in&nbsp;a&nbsp;Twitter&nbsp;API<br>
request&nbsp;and&nbsp;inserts&nbsp;it&nbsp;into&nbsp;MySQL,&nbsp;all&nbsp;in&nbsp;one&nbsp;call<br>
&nbsp;<br>
Here's&nbsp;some&nbsp;examples&nbsp;on&nbsp;how&nbsp;to&nbsp;use&nbsp;it:<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;the&nbsp;Search&nbsp;API<br>
&nbsp;&nbsp;&nbsp;&nbsp;twtSQL.<a href="#TwitterMySQL-tweetsToMySQL">tweetsToMySQL</a>('search/tweets',&nbsp;q='"Taylor&nbsp;Swift"&nbsp;OR&nbsp;"Jennifer&nbsp;Lawrence"')<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;hydrating&nbsp;(getting&nbsp;all&nbsp;available&nbsp;details)&nbsp;for&nbsp;a&nbsp;tweet<br>
&nbsp;&nbsp;&nbsp;&nbsp;twtSQL.<a href="#TwitterMySQL-tweetsToMySQL">tweetsToMySQL</a>('statuses/lookup',&nbsp;id="504710715954188288")<br>
&nbsp;<br>
For&nbsp;more&nbsp;twitterMethods&nbsp;and&nbsp;info&nbsp;on&nbsp;how&nbsp;to&nbsp;use&nbsp;them,&nbsp;see:<br>
<a href="http://dev.twitter.com/docs/api/1.1">http://dev.twitter.com/docs/api/1.1</a></tt></dd></dl>

<dl><dt><a name="TwitterMySQL-userTimeline"><strong>userTimeline</strong></a>(self, **params)</dt><dd><tt>For&nbsp;a&nbsp;given&nbsp;user,&nbsp;returns&nbsp;all&nbsp;the&nbsp;accessible&nbsp;tweets&nbsp;from&nbsp;that&nbsp;user,<br>
starting&nbsp;with&nbsp;the&nbsp;most&nbsp;recent&nbsp;ones&nbsp;(Twitter&nbsp;imposes&nbsp;a&nbsp;3200&nbsp;tweet&nbsp;limit).<br>
&nbsp;<br>
Here's&nbsp;an&nbsp;example&nbsp;of&nbsp;how&nbsp;to&nbsp;use&nbsp;it:<br>
for&nbsp;tweet&nbsp;in&nbsp;<a href="#TwitterMySQL-userTimeline">userTimeline</a>(screen_name&nbsp;=&nbsp;"taylorswift13"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;tweet<br>
&nbsp;<br>
See&nbsp;<a href="http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline">http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline</a>&nbsp;for&nbsp;details</tt></dd></dl>

<dl><dt><a name="TwitterMySQL-userTimelineToMySQL"><strong>userTimelineToMySQL</strong></a>(self, **params)</dt><dd><tt>For&nbsp;a&nbsp;given&nbsp;user,&nbsp;inserts&nbsp;all&nbsp;the&nbsp;accessible&nbsp;tweets&nbsp;from&nbsp;that&nbsp;user&nbsp;into,<br>
the&nbsp;current&nbsp;table.&nbsp;(Twitter&nbsp;imposes&nbsp;a&nbsp;3200&nbsp;tweet&nbsp;limit).<br>
&nbsp;<br>
Here's&nbsp;an&nbsp;example&nbsp;of&nbsp;how&nbsp;to&nbsp;use&nbsp;it:<br>
<a href="#TwitterMySQL-userTimelineToMySQL">userTimelineToMySQL</a>(screen_name&nbsp;=&nbsp;"taylorswift13")<br>
&nbsp;<br>
For&nbsp;details&nbsp;on&nbsp;keywords&nbsp;to&nbsp;use,&nbsp;see<br>
<a href="http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline">http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline</a></tt></dd></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>DEFAULT_MYSQL_COL_DESC</strong> = ['user_id bigint(20)', 'message_id bigint(20) primary key', 'message text', 'created_time datetime', 'in_reply_to_message_id bigint(20)', 'in_reply_to_user_id bigint(20)', 'retweet_message_id bigint(20)', 'source varchar(128)', 'lang varchar(4)', 'time_zone varchar(64)', 'friend_count int(6)', 'followers_count int(6)', 'coordinates varchar(128)', 'coordinates_address varchar(64)', 'coordinates_state varchar(3)', 'index useriddex (user_id)', 'index datedex (created_time)']<br>
<strong>DEFAULT_TWEET_JSON_SQL_CORR</strong> = {'created_time': "['created_at']", 'followers_count': "['user']['followers_count']", 'friend_count': "['user']['friends_count']", 'id': "['id_str']", 'in_reply_to_message_id': "['in_reply_to_status_id_str']", 'in_reply_to_user_id': "['in_reply_to_user_id_str']", 'lang': "['lang']", 'location': "['user']['location']", 'message': "['text']", 'message_id': "['id_str']", ...}<br>
<strong>MAX_MYSQL_ATTEMPTS</strong> = 5<br>
<strong>MAX_TWITTER_ATTEMPTS</strong> = 5<br>
<strong>TWEET_LIMIT_BEFORE_INSERT</strong> = 8000<br>
<strong>__author__</strong> = 'Maarten Sap'<br>
<strong>__version__</strong> = '0.2'</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#7799ee">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Author</strong></big></font></td></tr>
    
<tr><td bgcolor="#7799ee"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Maarten&nbsp;Sap</td></tr></table>
</body></html>